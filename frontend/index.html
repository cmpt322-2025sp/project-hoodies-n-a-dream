<!DOCTYPE html>
<html lang="en" xmlns="">
<head>
    <meta charset="UTF-8">
    <title>Nitro Racing!</title>
    <link rel="stylesheet" href="Startscreen.css">
    <link rel="stylesheet" href="general.css">
    <link rel="stylesheet" href="countDown.css">
    <link rel="stylesheet" href="answerStreak.css">
    <link rel="stylesheet" href="Finishline.css">
</head>
<body>
<section data-view="lobby" class="active">
    <div id="buttonContainer" style="display: none; position: absolute; bottom: 20%; left: 50%; transform: translateX(-50%); text-align: center;">
        <button onclick="addition()" class="level-button">
            <img src="../assets/Easy.png" alt="Easy">
        </button>
        <button onclick="subtraction()" class="level-button">
            <img src="../assets/Medium.png" alt="Medium">
        </button>
        <button onclick="multiplication()" class="level-button">
            <img src="../assets/Hard.png" alt="Hard">
        </button>
    </div>

    <img src="../assets/NitroNumbers.png" class="title" alt="NitroNumbers"/>
    <img src ="../assets/Start.png" class = "Start" alt = "Start" onclick="Create()"/>
    <img src ="../assets/Join.png" class = "Join" alt = "Join" onclick="Code()"/>
</section>
<section data-view="race">
    <div id="carShield"></div>

    <div id = "carStreak"></div>

    <div id="map1"></div>
    <div id="map2"></div>
    <div id="map3"></div>
    <div id="track"></div>

    <div id="transition">
        <img src="https://i.pinimg.com/474x/df/65/67/df6567a6fa06656d909980e6fbdcfdf1.jpg" >
        <img src="https://th.bing.com/th/id/R.602b95bb0daec842b69c42e007d79026?rik=%2bprgNhkUS1OsvA&pid=ImgRaw&r=0" >
        <img src="https://th.bing.com/th/id/R.1f4a53e7d20f061e3ac2616988fc024b?rik=Em5fLqVRGqZukQ&pid=ImgRaw&r=0" >
        <img src="https://th.bing.com/th/id/R.1f4a53e7d20f061e3ac2616988fc024b?rik=Em5fLqVRGqZukQ&pid=ImgRaw&r=0" >
        <img src="https://i.pinimg.com/474x/df/65/67/df6567a6fa06656d909980e6fbdcfdf1.jpg" >
        <img src="https://th.bing.com/th/id/R.602b95bb0daec842b69c42e007d79026?rik=%2bprgNhkUS1OsvA&pid=ImgRaw&r=0" >
        <img src="https://th.bing.com/th/id/R.1f4a53e7d20f061e3ac2616988fc024b?rik=Em5fLqVRGqZukQ&pid=ImgRaw&r=0" >
    </div>

    <div id="overlay"></div>
    <button id="startGame" onclick="Lights()">Start Race</button>
    <div id="countDown"></div>

    <div id="answerStreak"></div>

    <div>
        <img id="car" class="car" src="../assets/Car1.png" alt="Car">
    </div>

    <div class="players">
        <div class="player1">
            <img id="car1-model" src="../assets/Car1.png">
            <h1 id="player-border"> Player   1</h1>
            <img class="fireStreak" src="../assets/fireStreak1.png" alt="streak#1">
            <img class="fireStreak" src="../assets/fireStreak1.png" alt="streak#2">
            <img class="fireStreak" src="../assets/fireStreak1.png" alt="streak#3">
            <img class="fireStreak" src="../assets/fireStreak1.png" alt="streak#4">
            <img class="fireStreak" src="../assets/fireStreak1.png" alt="streak#5">

        </div>
    </div>

    <div>
        <h1 id="clock">00:00</h1>
    </div>

    <div class="equation-container">
        <h1 id="equation"></h1>
        <div class="button-container">
            <button id="bt1" class = "buttons" onclick="checkAnswer(this)"><span id = "bt1span"></span></button>
            <button id="bt2" class = "buttons" onclick="checkAnswer(this)"><span id = "bt2span"></span></button>
            <button id="bt3" class = "buttons" onclick="checkAnswer(this)"><span id = "bt3span"></span></button>
            <button id="bt4" class = "buttons" onclick="checkAnswer(this)"><span id = "bt4span"></span></button>
        </div>
    </div>

    <div id="room-code">Game ID: Loading...</div>

    <div id="game-border"></div>

    <div class="traffic-light-box">
        <div id="red" class="light red"></div>
        <div id="yellow" class="light yellow"></div>
        <div id="green" class="light green"></div>
    </div>

    <audio id="countSound" src="../audio/countdown_Bell2.wav" preload="auto"></audio>
    <audio id="rightSound" src="../audio/rightSound.wav" preload="auto"></audio>
    <audio id="wrongSound" src="../audio/wrongSound2.mp3" preload="auto"></audio>
    <audio id="soundTrack" src="../audio/soundtrack.wav" preload="auto" loop></audio>
    <audio id="streakSound" src="../audio/streakSound.wav" preload="auto"></audio>
</section>
<section data-view="finishLine">
    <div id="finish"></div>
    <div id="cup"></div>
    <div id="finish_track"></div>
    <div>
        <img id="car" class="carfl" src="../assets/Car1.png" alt="Car">
    </div>
</section>
<!--<section>-->
<!--    <div>-->
<!--        <img id="car" class="carfs" src="../assets/Car1.png" alt="Car">-->
<!--    </div>-->
<!--    <div class="players">-->
<!--        <div class="player1">-->
<!--            <img id="car1-model" src="../assets/Car1.png">-->
<!--            <h1 id="player-border"> Player1</h1>-->
<!--        </div>-->
<!--        <h1 id="clockfs">00:00</h1>-->

<!--    </div>-->
<!--    <img src="../assets/CONGRATULATIONS.png" class="title" alt="NitroNumbers"/>-->
<!--    <img src ="../assets/Rematch.png" class = "Rematch" alt = "Rematch" onclick="Start()"/>-->
<!--    <img src ="../assets/Pitstop.png" class = "Quit" alt = "Quit" onclick="Quit()"/>-->
<!--</section>-->
</body>
<script src = "Questions.js"></script>
<script src = "Gamefunctions.js"></script>
<script src = "FinishLine.js"></script>
<script>
    const ws = new WebSocket("wss://math-nitro-racing.deno.dev/ws");
    ws.onopen = () => {
        console.log("✅ WebSocket Connected");
    };

    ws.onmessage = (event) => {
        console.log("📩 Received:", event.data);
    };

    ws.onerror = (error) => {
        console.error("❌ WebSocket Error:", error);
    };

    ws.onclose = () => {
        console.log("🔴 WebSocket Disconnected");
    };
    function Create() {
        // Show the three option buttons instead of navigating immediately
        document.getElementById("buttonContainer").style.display = "block";
        navigateTo('race');
    }

    function addition() {
        let  value = "addition";
        // Holds difficulty for questions
        localStorage.setItem("difficulty",value);
        // When a player clicks one of the three buttons, proceed to game
        window.location.href = "Game_Animation.html";
    }
    function subtraction() {
        let  value = "subtraction";
        // Holds difficulty
        localStorage.setItem("difficulty",value);
        // holds difficulty
        window.location.href = "Game_Animation.html";
    }
    function multiplication() {
        let  value = "multiplication";
        // When a player clicks one of the three buttons, proceed to game
        localStorage.setItem("difficulty",value);
        window.location.href = "Game_Animation.html";
    }
    function Code() {
        let userCode = prompt("Enter your code:");
        if (userCode) {
            alert("You entered: " + userCode); // You can change this to process the code
        } else {
            alert("No code entered.");
        }
    }

    const views = document.querySelectorAll('[data-view]');
    function navigateTo(name) {
        views.forEach(s =>
            s.classList.toggle('active', s.dataset.view === name)
        );
    }
</script>
</html>