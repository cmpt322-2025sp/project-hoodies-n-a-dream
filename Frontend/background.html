<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car Flip and Move</title>
    <style>
        body {
            /*https://wallpaperaccess.com/full/4107787.jpg*/
            margin: 0;
            height: 100vh;
            background-image: url('../Assets/track.png'), url("https://wallpaperaccess.com/full/4107787.jpg");
            background-size: 120% 30%, 120% 80%;
            background-repeat: repeat-x, repeat-x;
            background-position: bottom center, center -40%;
            overflow: hidden;

        }

        .car {
            width: 250px;
            height: 125px;
            position: absolute;
            top: 75%;
            left: -5%;
            transform: translate(-50%, -50%);
        }
        .move-button {
            position: absolute;
            top: 680px;
            left: 400px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: blue;
            color: white;
            border: none;
            cursor: pointer;
        }
        .stop-button {
            position: absolute;
            top: 680px;
            left: 700px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: darkred;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div>
    <img id="car" class="car" src="../Assets/Car1.png" alt="Car">
</div>
<button class = "move-button" onclick="startCar()">Move Car</button>
<button class = "stop-button" onclick="stopCar()">Stop Car</button>

<script>

    let offset1 = 0; // Initial offset position of the first background
    let offset2 = 0; // Initial offset position of the second background

    let speed1 = 0; // city, etc..
    let speed2 = 0; // race track

    function animateBackground() {
        offset1 -= speed1;
        speed1 = Math.min(speed1 + 0.001, 2);

        offset2 -= speed2;
        speed2 = Math.min(speed2 + 0.1, 1000);

        // Update the background positions for each background image
        document.body.style.backgroundPosition = `${offset2}px bottom, ${offset1}px 0`;

        // Call the function again on the next frame for smooth animation
        requestAnimationFrame(animateBackground);
    }
    // Start the animation
    animateBackground();
    const car = document.getElementById('car');
    const flipFrames = ['../Assets/Car6.png', '../Assets/Car7.png', '../Assets/Car8.png'];
    let moveSpeed = 5;
    let currentSpeed = moveSpeed;
    let isFlipping = false;
    let moving = false;

    // Convert 10% of screen width to pixels
    const targetPosition = window.innerWidth * 0.10;
    let carPosition = 20; // Initial position

    function moveCar() {
        if (moving && !isFlipping && carPosition < targetPosition) {
            carPosition += currentSpeed;
            car.style.left = carPosition + 'px';
        } else {
            moving = false; // Stop the movement when target is reached
        }
    }

    function performFlip() {
        if (!isFlipping) {
            isFlipping = true;
            let flipIndex = 0;
            const flipInterval = setInterval(() => {
                if (flipIndex < flipFrames.length) {
                    car.src = flipFrames[flipIndex];
                    flipIndex++;
                } else {
                    clearInterval(flipInterval);
                    isFlipping = false;
                    currentSpeed /= 2;
                }
            }, 100);
        }
    }



    function startCar() {
        moving = true;
    }

    function stopCar() {
        moving = false;
    }

    window.addEventListener('keydown', (event) => {
        if (event.code === 'Space') {
            performFlip();
        }
    });

    setInterval(moveCar, 20);
    function intro() {
        moving = true;
        const interval = setInterval(() => {
            moveCar();
            if (!moving) {
                clearInterval(interval);
            }
        }, 20);
    }
    window.onload = intro;
</script>

</body>
</html>




